(this["webpackJsonpunichat-template"]=this["webpackJsonpunichat-template"]||[]).push([[0],{150:function(e,t,a){e.exports=a(343)},155:function(e,t,a){},343:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(29),o=a.n(r),u=(a(155),a(62)),i=a(6),l=a(11),s=a(33),E=a.n(s),d=(a(158),E.a.initializeApp({apiKey:"AIzaSyC0DyuEwf8q48lqR8vuN5ywKjEo-C1a_kw",authDomain:"mendu-5fcdb.firebaseapp.com",projectId:"mendu-5fcdb",storageBucket:"mendu-5fcdb.appspot.com",messagingSenderId:"912539950418",appId:"1:912539950418:web:b4065e20faf9a80df66e8b",measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyC0DyuEwf8q48lqR8vuN5ywKjEo-C1a_kw",REACT_APP_FIREBASE_AUTH_DOMAIN:"mendu-5fcdb.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"mendu-5fcdb",REACT_APP_FIREBASE_STORAGE_BUCKET:"mendu-5fcdb.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"912539950418",REACT_APP_FIREBASE_APP_ID:"1:912539950418:web:b4065e20faf9a80df66e8b",REACT_APP_CHAT_ENGINE_PROJECT_ID:"6d49d424-f1f2-4295-a00a-881a9b71a880",REACT_APP_CHAT_ENGINE_PRIVATE_KEY:"a46e0a96-315d-44f1-af2e-d73579876cc5"}).RAECT_APP_FIREBASE_MEASURMENT_ID}).auth()),p=c.a.createContext(),m=function(e){var t=e.children,a=Object(n.useState)(!0),r=Object(l.a)(a,2),o=r[0],u=r[1],s=Object(n.useState)(null),E=Object(l.a)(s,2),m=E[0],f=E[1],h=Object(i.f)();Object(n.useEffect)((function(){d.onAuthStateChanged((function(e){f(e),u(!1),e&&h.push("/chats")}))}),[m,h]);var _={user:m};return c.a.createElement(p.Provider,{value:_},!o&&t)},f=a(15),h=a.n(f),_=a(27),b=a(148),A=a(4),g=a.n(A),v="6d49d424-f1f2-4295-a00a-881a9b71a880",P=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(i.f)(),u=Object(n.useContext)(p).user,s=function(){var e=Object(_.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signOut();case 2:o.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(_.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.blob();case 5:return n=e.sent,e.abrupt("return",new File([n],"userPhoto.jpg",{type:"image/jpg"}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){u?(console.log("***",u),g.a.get("https://api.chatengine.io/users/me",{headers:{"project-id":v,"user-name":u.email,"user-secret":u.uid}}).then((function(){r(!1)})).catch((function(e){try{var t=new FormData;t.append("email",u.email),t.append("username",u.email),t.append("secret",u.uid),E(u.photoURL).then((function(e){t.append("avatar",e,e.name),g.a.post("https://api.chatengine.io/users/",t,{headers:{"private-key":"a46e0a96-315d-44f1-af2e-d73579876cc5"}}).then((function(){r(!1)})).catch((function(e){console.log(e)}))}))}catch(e){console.log("account creation login error: "+e),s()}}))):o.push("/")}),[]),!u||a?"Loading..":c.a.createElement("div",{className:"chat-page"},c.a.createElement("div",{className:"nav-bar"},c.a.createElement("div",{className:"logo-tab"},"UndMe"),c.a.createElement("div",{onClick:s,className:"logout-tab"},"Logout")),c.a.createElement(b.d,{height:"calc(100vh - 66px)",projectID:v,userName:u.email,userSecret:u.uid}))},S=a(346),I=a(345),R=function(){return c.a.createElement("div",{id:"login-page"},c.a.createElement("div",{id:"login-card"},c.a.createElement("h2",null,"Welcome to UndMe"),c.a.createElement("div",{className:"login-button google",onClick:function(){return d.signInWithRedirect(new E.a.auth.GoogleAuthProvider)}},c.a.createElement(S.a,null)," Sign in with Google"),c.a.createElement("br",null)," ",c.a.createElement("br",null),c.a.createElement("div",{className:"login-button facebook",onClick:function(){return d.signInWithRedirect(new E.a.auth.FacebookAuthProvider)}},c.a.createElement(I.a,null)," Sign in with Google")))};var C=function(){return c.a.createElement("div",{style:{fontFamily:"Avenir"}},c.a.createElement(u.a,null,c.a.createElement(m,null,c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/chats",component:P}),c.a.createElement(i.a,{path:"/",component:R})))))};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C,null)),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.32ada1df.chunk.js.map